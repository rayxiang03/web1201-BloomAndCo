<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Bloom&Co.</title>
        <link rel="icon" href="./assets/images/favicon.svg" type="image/svg+xml" sizes="any">

        <link href="assets/css/style.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/register.css" rel="stylesheet" type="text/css" />


        <!-- Font Awesome ONLY -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>

    <style>
.header *{
    color: black;
}
.header{
    box-shadow: 0 7.8px 11px hsla(114, 24%, 69%, 0.15);
}
    </style>
    </head>

    <body>
        <header class="header" data_hdr>
            <div class="container">
    
                <!-- Only Available when the screen size is smaller ya-->
                <button class="nav_minimize" data_minimize>
                    <i class="fa fa-bars" id="threeLines" name="menu-outline"></i>
                    <i class="fa fa-times" id="tutup" name="close-outline"></i>
                </button>
                <a href="index.html" class="logo"><img src="assets/images/logo-ver2.svg" width="150px"></a>
                <!------------------------------------------------------->
    
                <nav class="NavigationBar" data_nav_bar>
                    <ul class="NavigationBar_List">
                        <li><a href="index.html" class="navbar_href" data_nav_href>Home</a></li>
                        <li><a href="shop.html" class="navbar_href" data_nav_href>Shop</a></li>
                        <li><a href="about.html" class="navbar_href" data_nav_href>About</a></li>
                        <li><a href="contact_us.html" class="navbar_href" data_nav_href>Contact</a></li>
                    </ul>
    
                    <a href="login.html" class="nav_login">LOG IN</a>
                </nav>
    
                <div class="rightHeader">
                  <div style="position: relative; display: inline-block;">
                    <form method="GET">
                      <input type="search" placeholder="Search Products..." id="search" style="padding: 8px; width: 150px; border: 1px solid #ccc; border-radius: 8px;">
                        <button style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%);" onclick="search()">
                          <i class="fa fa-search" style="font-size:16px; color: #3a4e1d;" aria-hidden="true"></i>
                        </button>
                    </form>
                  </div>
                
                    <button class="headerButton user">
                        <a href="login.html">
                            <i class="fa fa-user" style="font-size:20px"></i>
                        </a>
                    </button>
    
                    <button class="headerButton">
                      <a href="shopping_cart.html">
                        <i class="fa fa-shopping-cart" style="font-size:20px"></i>
                      </a>
                    </button>
                </div>
            </div>
        </header>

            <div class="reg_container">   
                <!-- Left column -->
                    <div class="reg_column">
                        <h2>Register</h2>
        
                        <form id="registerForm" action="POST">
                            <input type="hidden" name="type" value="customer"/>
        
                            <div class="form-row">
                                <label for="fullName" id="mandatory">Full Name:</label>
                                <input type="text" id="fullName" name="fullName" placeholder="Enter your full name" required>
        
                                <label for="email" id="mandatory">Email:</label>
                                <input type="email" id="email" name="email" placeholder="Enter your email" required>
        
                                <label for="password" id="mandatory">Password:</label>
                                <input type="password" id="password" name="password" placeholder="Enter your password" required>
        
                                <label for="dob" id="mandatory">Date of Birth:</label>
                                <input type="date" id="dob" name="dob" required>
                            </div>
                    </div>
        
                    <div class="reg_column">
                            <div class="form-row">
                                <label id="mandatory">Gender:</label>
                                <div class="radio-group">
                                    <label for="male"><input type="radio" id="male" name="gender" value="male" required> Male</label>
                                    <label for="female"><input type="radio" id="female" name="gender" value="female" required> Female</label>
                                </div>
        
                                <label for="contactNumber" id="mandatory">Contact Number:</label>
                                <input type="tel" id="contactNumber" name="contactNumber" placeholder="Enter your contact number" required>
        
                                <label for="address">Address:</label>
                                <textarea id="address" name="address" placeholder="Enter your address"></textarea>
                            </div>
        
                            <div class="form-row">
                                <button type="button" onclick="validateData()">Register</button>
                                <br/>
                                <span>If already registered, <a href="login.html" style="color: cadetblue;">login here</a></span>
                            </div>
                        </form>
                    </div>
            </div>

            <footer style="background-image: url('./assets/images/footer.gif')">
                <div class="footer_box section">
                    <div class="container">
                        <div>
                            <a href="#" class="logo">Bloom&Co.</a>
                            <p class="footer-text" style="margin-block-end: 22px; color: rgba(71, 66, 66, 0.856);;">If you have any enquiry, please find us at <a href="mailto:support@bloom.com" style="color: slateblue; font-weight: bold;">support@bloom.com</a></p>
                            <ul>
                                <li class="contact">
                                    <i class="fa fa-map-marker" style="font-size:26px; color: #505e3c;"></i>
                                    <address style="color: rgba(71, 66, 66, 0.856);">
                                        1, Jalan Puteri 1/1 Bandar Puteri 47100 Puchong Selangor.
                                    </address>
                                </li>
    
                                <li class="contact">
                                    <i class="fa fa-phone" style="font-size:26px; color: #505e3c;"></i>
    
                                    <a href="tel:+6010010100" style="color: rgba(71, 66, 66, 0.856);">(+60)-10 010 0100</a>
                                </li>
                            </ul>
                        </div>
    
                        <ul>
                            <li><p class="footer_title">About</p></li>
                            <li style="text-align: justify; color: #193b44;">
                                Founded in 2023,
                                Bloom&Co. takes pride in curating the finest blooms
                                and greenery worldwide. <b>"Where every leaf tells a story, 
                                and every plant inspires a moment of natural beauty."</b>
                            </li>
                        </ul>
    
                        <ul style="color: #3b4232;">
                            <li><p class="footer_title">Menu</p></li>
                            <li><a href="contact_us.html" class="footer_href">Contact Us</a></li>
                            <li><a href="login.html" class="footer_href">Login</a></li>
                            <li><a href="register.html" class="footer_href">Register</a></li>
                            <li><a href="about.html" class="footer_href">About</a></li>
                            <li><a href="shop.html" class="footer_href">Shop</a></li>
                        </ul>
    
                    </div>
                </div>
    
                <div style="padding-block: 2px;">
                    <div class="container">
                        <p style="text-align: center;">&copy; 2023 Bloom&Co.  <i><sub style="color: rgb(36, 158, 189);">by RayXiang</sub></i></p>
                        <p class="dates">Version: 20231201B | Created on: 20 November 2023 | Last Updated on: 10 December 2023 | Data Collection Date: 30 November 2023</p>
                    </div>
                </div>
            </footer>


    </body>

</html>

<!-- Rx: ONLY if user login will redirect to profile -->
<script src="./assets/javascripts/login.js" defer></script>

<script>
function validateData() {
    var form = document.getElementById("registerForm");
    var isValid = true;
    var errorMessages = [];

    for (var i = 0; i < form.elements.length; i++) {
        var element = form.elements[i];

        if (element.tagName.toLowerCase() === 'input' && element.hasAttribute('required')) {
            if (element.type === 'radio' && !isRadioSelected(element.name)) {
                isValid = false;
                highlightField(element);
                //To prevent the radio button run 2 times separately
                if (!errorMessages.includes("Please select a gender.")) {
                    errorMessages.push("Please select a gender.");
                }
            } else if (element.type === 'email' && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(element.value.trim())) {
                isValid = false;
                highlightField(element);
                errorMessages.push("Please enter a valid email address.");
            } else if (element.type === 'password' && element.value.trim().length < 6) {
                isValid = false;
                highlightField(element);
                errorMessages.push("Password must be at least 6 characters.");
            } else if (!element.value.trim()) {
                isValid = false;
                highlightField(element);
                if (!errorMessages.includes("Please fill in all mandatory fields!")) {
                    errorMessages.push("Please fill in all mandatory fields!");
                }
            }
        }
    }

    if (isValid) {
        register();
    } else {
        alert(errorMessages.join("\n"));
    }
}

function isRadioSelected(radioName) {
    var radioButtons = document.querySelectorAll('input[name="' + radioName + '"]');
    return Array.from(radioButtons).some(button => button.checked);
}

function highlightField(field) {
    field.classList.add('invalid-field');
}

function register(){
        let fullName,email,password,dob,contactNumber,address;
        let gender = document.querySelector('input[name="gender"]:checked').value;
            fullName=document.getElementById("fullName").value;
            email=document.getElementById("email").value;
            password=document.getElementById("password").value;
            dob=document.getElementById("dob").value;
            contactNumber=document.getElementById("contactNumber").value;
            address=document.getElementById("address").value;

        let customer_records = new Array();
        customer_records=JSON.parse(localStorage.getItem("customers"))?JSON.parse(localStorage.getItem("customers")):[]
        if(customer_records.some((v)=>{return v.email==email})){
            alert("Email already Registered in database. Please try another email or login...");
            }else{
                customer_records.push({
                    "fullName":fullName,
                    "email":email,
                    "password":password,
                    "dob":dob,
                    "gender":gender,
                    "contactNumber":contactNumber,
                    "address":address
    })
localStorage.setItem("customers",JSON.stringify(customer_records));
alert("Successfully Register!");
window.location.href = 'login.html';

}
}
</script>

<script src="./assets/javascripts/navigation.js" defer></script>